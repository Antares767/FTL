# Домашнее задание: Улучшенный робот-художник

На занятии вы создали робота, который умеет рисовать шестиугольник. Теперь пришло время расширить его возможности!

## Задачи

1. **Произвольный n-угольник:** Научите робота рисовать правильный многоугольник с любым заданным количеством сторон (`n`).
2. **Скругленные углы:** Модернизируйте робота, чтобы он мог рисовать n-угольники с закругленными углами.

### Подсказка для скругленных углов

Как вы уже обсуждали, для рисования скругленных многоугольников роботу необходимо чередовать движение по прямой (отрезки) и движение по дуге. С отрезками всё просто — у них есть только длина. Для дуг же нам понадобятся два параметра: радиус и угол поворота. На основе этих данных мы сможем вычислить, с какой линейной ($v$) и угловой ($\omega$) скоростью должен двигаться робот.

Помним, что $\omega=\frac{v}{r}$ и нельзя делить на ноль!

Где:

- $ \omega $ (омега) — угловая скорость (в градусах или радианах в секунду).
- $ v $ — линейная скорость (в условных единицах в секунду).
- $ r $ — радиус дуги (в условных единицах).

---

## План выполнения домашнего задания

### Часть 1: Рисование произвольного n-угольника

Это задание очень похоже на то, что вы делали в классе с квадратом (`task_1_3_draw_square.md`), но обобщенное для любого количества сторон.

**Шаг 1: Собрать базовый класс `Robot`**

- Соберите в одной ячейке ноутбука ваш класс `Robot` из классных заданий.
- Убедитесь, что у него есть работающие методы:
  - `__init__(self, name)`: конструктор.
  - `move_forward(self, distance)`: движение вперед.
  - `turn(self, angle)`: поворот на месте.

**Шаг 2: Реализовать метод `draw_polygon(self, n, side_length)`**

- Метод должен принимать `n` (количество углов) и `side_length` (длина стороны).
- Внутри метода:
  1. Рассчитайте внешний угол многоугольника: `angle = 360 / n`.
  2. В цикле `for`, который повторяется `n` раз, вызовите:
     - `self.move_forward(side_length)` — для рисования стороны.
     - `self.turn(angle)` — для поворота к следующей стороне.

**Шаг 3: Проверить и визуализировать работу**

- Используйте `matplotlib.pyplot` и его функцию `subplot`, чтобы нарисовать 4 разных многоугольника на одном изображении в сетке 2x2.
- Для каждого многоугольника:
  1. Создайте нового робота (или сбрасывайте состояние старого).
  2. Вызовите ваш метод `draw_polygon` с разным количеством сторон (например, `n=3`, `n=4`, `n=5`, `n=8`).
  3. Нарисуйте путь робота (`robot.history`) на соответствующем под-графике.

**Пример использования `plt.subplot`:**

```python
import matplotlib.pyplot as plt

plt.figure(figsize=(10, 10))

# Первый график
plt.subplot(2, 2, 1)
# ... ваш код для рисования треугольника ...
plt.title("Треугольник (n=3)")

# Второй график
plt.subplot(2, 2, 2)
# ... ваш код для рисования квадрата ...
plt.title("Квадрат (n=4)")

# Третий график
plt.subplot(2, 2, 3)
# ... ваш код для рисования пятиугольника ...
plt.title("Пятиугольник (n=5)")

# Четвертый график
plt.subplot(2, 2, 4)
# ... ваш код для рисования восьмиугольника ...
plt.title("Восьмиугольник (n=8)")

plt.tight_layout() # для красивого расположения
plt.show()
```

---

### Часть 2: Рисование n-угольника с закругленными углами

На этом шаге мы научим робота чередовать движение по прямой и по дуге, чтобы сглаживать углы у многоугольников. В результате должны получаться фигуры, похожие на эту:

<img src="../img.png" alt="Пример скругленного треугольника" width="30%">

**Шаг 4: Добавить симуляцию движения**

- Чтобы движение было непрерывным, добавьте в класс `Robot`:
  - Атрибуты: `angular_speed = 0` (угловая скорость) и `dt = 0.01` (шаг по времени).
  - Метод `set_angular_speed(self, new_speed)`.
  - Метод `update(self)`, который на каждом шаге `dt` будет обновлять:
    - Направление (`self.direction`) на основе `self.angular_speed`.
    - Координаты (`self.x`, `self.y`) на основе `self.speed`.
    - Историю (`self.history`).

### ⚠️ Важное замечание о точности симуляции

Поскольку наша симуляция основана на дискретных шагах по времени (`dt`), могут возникать небольшие погрешности в вычислениях. Это особенно заметно на высоких скоростях при поворотах. Робот может "проскакивать" нужный угол и не доворачивать, что приведет к неидеальной фигуре, как на примере ниже:

![Пример ошибки симуляции](img/error-demo.png)

**Как этого избежать?**

Чтобы повысить точность, старайтесь использовать **небольшие линейные и угловые скорости** в ваших расчетах. Чем медленнее движется робот, тем точнее будет его траектория.

**Шаг 5: Реализовать метод `draw_rounded_polygon(self, n, side_length, radius)`**

- Этот метод будет состоять из цикла, повторяющегося `n` раз. В каждой итерации робот должен:

  **a) Проехать по прямой:**

  - Установить угловую скорость в `0`.
  - Двигаться вперед на `side_length`.

  **b) Повернуть по дуге (нарисовать скругление):**

  - Рассчитать угловую скорость по формуле: `omega = self.speed / radius` (не забываем про проверку `radius > 0`).
  - Установить эту угловую скорость через `set_angular_speed`.
  - Рассчитать время, необходимое для поворота на угол `360 / n`: `time_for_turn = (360 / n) / omega`.
  - Запустить симуляцию на это время (вызывая `update()` в цикле).

**Шаг 6: Визуализировать и сравнить результаты**

-   Используйте `matplotlib.pyplot` и `subplot`, чтобы нарисовать 4 разных скругленных многоугольника на одном изображении в сетке 2x2.
-   Это позволит вам наглядно сравнить, как меняется форма в зависимости от количества сторон (`n`) и радиуса скругления (`radius`).
-   Например, нарисуйте скругленный треугольник, квадрат, пятиугольник и шестиугольник.

**Пример использования `plt.subplot`:**

```python
import matplotlib.pyplot as plt

plt.figure(figsize=(10, 10))

# График 1: Скругленный треугольник
plt.subplot(2, 2, 1)
# ... ваш код для рисования скругленного треугольника (n=3) ...
plt.title("Скругленный треугольник")
plt.axis('equal') # для сохранения пропорций

# График 2: Скругленный квадрат
plt.subplot(2, 2, 2)
# ... ваш код для рисования скругленного квадрата (n=4) ...
plt.title("Скругленный квадрат")
plt.axis('equal')

# График 3: Скругленный пятиугольник
plt.subplot(2, 2, 3)
# ... ваш код для рисования скругленного пятиугольника (n=5) ...
plt.title("Скругленный пятиугольник")
plt.axis('equal')

# График 4: Скругленный шестиугольник
plt.subplot(2, 2, 4)
# ... ваш код для рисования скругленного шестиугольника (n=6) ...
plt.title("Скругленный шестиугольник")
plt.axis('equal')

plt.tight_layout()
plt.show()
```
